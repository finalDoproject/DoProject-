<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="my">
	<resultMap type="map" id="my"/>
	
	<insert id="insertContent">
	INSERT INTO MYCALENDAR VALUES
	(SEQ_MCNO.NEXTVAL, #{mcStart}, #{mcEnd}, #{mcContent}, DEFAULT, #{mcMno})
	</insert>
	
	<select id="selectMypage" resultType="my">
	<!-- SELECT * FROM MYCALENDAR WHERE MCMNO = #{mno} AND MCCONDITION = 'Y' -->
		SELECT * FROM (
			SELECT 1 "TYPE", MCNO, MCSTART, MCEND, MCCONTENT, MCMNO FROM MYCALENDAR
			WHERE MCCONDITION = 'Y'
			UNION
			SELECT 2 "TYPE", TNO, TSTARTDATE, TENDDATE, TTITLE, TMNO FROM TASK )
		WHERE MCMNO = #{mno}
		ORDER BY MCSTART
	</select>
	
	<update id="updateContent">
	UPDATE MYCALENDAR SET MCCONTENT = #{mcContent} WHERE MCNO = #{mcno}
	</update>
	
	<update id="deleteContent">
	UPDATE MYCALENDAR SET MCCONDITION = 'N' WHERE MCNO = #{mcno}
	</update>
	
	
	
</mapper>
